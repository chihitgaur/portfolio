{% extends 'portfolio/base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen flex flex-col items-center justify bg-black text-white">
    <div class="w-full max-w-2xl px-6">
        <h1 class="text-3xl font-bold text-center mb-4">Talk to My Chatbot ðŸ¤–</h1>
        <p class="text-sm text-gray-300 text-center mb-6">
            Ask anything about me or general queries. <br>
            <span class="text-red-400">To get info about Chihit, include "Chihit" in your prompt.</span>
        </p>

        <form method="post" class="flex flex-col space-y-4" id="chatForm">
            {% csrf_token %}
            <textarea name="prompt" placeholder="Write your question here..." class="p-4 rounded-lg bg-gray-800 text-white w-full h-32 resize-none" id="promptTextarea"></textarea>
            <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
                Ask
            </button>
        </form>

        {% if response %}
        <div class="mt-6 bg-gray-900 p-4 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-2">Response:</h2>
            <p class="text-gray-200 whitespace-pre-line">{{ response }}</p>
        </div>
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const textarea = document.getElementById('promptTextarea');
        const form = document.getElementById('chatForm');

        textarea.addEventListener('keydown', function(event) {
            // Check if Enter key is pressed without Shift key
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault(); // Prevent the default newline
                form.submit(); // Submit the form
            }
        });
    });
</script>
{% endblock %}